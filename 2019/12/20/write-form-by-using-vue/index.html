<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【step by step】使用 Vue 封装一个表单校验 | 既然选择了远方，便只顾风雨兼程</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link ref="icon" href="./public/favicon.icon">
    <meta name="description" content="

不管是 PC 端还是移动端，提交表单是一个常见场景，那么友好交互的表单校验也是一个常见场景了。

最近本人在开发移动端页面，也遇见了表单需求，倒霉的是技术选型中的 UI 库不符合业务场景，于是
我走上了一条自己动手，然后希望丰衣足食的道路.....

![image from dependency](../../.vuepress/public/images/write-fo ...">
    
    <link rel="preload" href="/assets/css/0.styles.730f6d4f.css" as="style"><link rel="preload" href="/assets/js/app.c4cd884f.js" as="script"><link rel="preload" href="/assets/js/23.d4940eec.js" as="script"><link rel="preload" href="/assets/js/5.5d32c9ea.js" as="script"><link rel="preload" href="/assets/js/8.cd0ad175.js" as="script"><link rel="prefetch" href="/assets/js/10.a13898e2.js"><link rel="prefetch" href="/assets/js/11.ea480a48.js"><link rel="prefetch" href="/assets/js/12.0623054f.js"><link rel="prefetch" href="/assets/js/13.ef25626c.js"><link rel="prefetch" href="/assets/js/14.37d92c2e.js"><link rel="prefetch" href="/assets/js/15.186b7794.js"><link rel="prefetch" href="/assets/js/16.3a23dbe1.js"><link rel="prefetch" href="/assets/js/17.cf1e4c9d.js"><link rel="prefetch" href="/assets/js/18.733102b1.js"><link rel="prefetch" href="/assets/js/19.eb455b58.js"><link rel="prefetch" href="/assets/js/20.e1adbccc.js"><link rel="prefetch" href="/assets/js/21.70504574.js"><link rel="prefetch" href="/assets/js/22.a40e7218.js"><link rel="prefetch" href="/assets/js/24.e000ab2c.js"><link rel="prefetch" href="/assets/js/25.2fe1472c.js"><link rel="prefetch" href="/assets/js/26.84502e94.js"><link rel="prefetch" href="/assets/js/27.c5d352fe.js"><link rel="prefetch" href="/assets/js/28.8e4ee861.js"><link rel="prefetch" href="/assets/js/29.fb15a9ed.js"><link rel="prefetch" href="/assets/js/3.2bd813b0.js"><link rel="prefetch" href="/assets/js/30.baf8f290.js"><link rel="prefetch" href="/assets/js/31.369fdd21.js"><link rel="prefetch" href="/assets/js/32.c0176c82.js"><link rel="prefetch" href="/assets/js/33.b3200294.js"><link rel="prefetch" href="/assets/js/34.08880f00.js"><link rel="prefetch" href="/assets/js/35.133a227c.js"><link rel="prefetch" href="/assets/js/36.293f2b2b.js"><link rel="prefetch" href="/assets/js/37.f92a5aa5.js"><link rel="prefetch" href="/assets/js/38.11242c63.js"><link rel="prefetch" href="/assets/js/39.1540f3d9.js"><link rel="prefetch" href="/assets/js/4.dde594c9.js"><link rel="prefetch" href="/assets/js/40.bc77545d.js"><link rel="prefetch" href="/assets/js/41.fe6b364e.js"><link rel="prefetch" href="/assets/js/42.6b17d3ae.js"><link rel="prefetch" href="/assets/js/43.d988bf22.js"><link rel="prefetch" href="/assets/js/44.9b709226.js"><link rel="prefetch" href="/assets/js/45.0797ebde.js"><link rel="prefetch" href="/assets/js/46.d41406d1.js"><link rel="prefetch" href="/assets/js/47.26d992a5.js"><link rel="prefetch" href="/assets/js/48.edf0660d.js"><link rel="prefetch" href="/assets/js/49.e1bd4b64.js"><link rel="prefetch" href="/assets/js/50.17997f4a.js"><link rel="prefetch" href="/assets/js/51.0731d59f.js"><link rel="prefetch" href="/assets/js/52.718863ae.js"><link rel="prefetch" href="/assets/js/53.4d2f7088.js"><link rel="prefetch" href="/assets/js/54.91ac93f6.js"><link rel="prefetch" href="/assets/js/55.3216e5c5.js"><link rel="prefetch" href="/assets/js/56.a2736731.js"><link rel="prefetch" href="/assets/js/57.93476b89.js"><link rel="prefetch" href="/assets/js/58.9984e9d6.js"><link rel="prefetch" href="/assets/js/59.27eeb159.js"><link rel="prefetch" href="/assets/js/6.e9162c19.js"><link rel="prefetch" href="/assets/js/60.83f3f7cd.js"><link rel="prefetch" href="/assets/js/61.322f6435.js"><link rel="prefetch" href="/assets/js/62.af66f292.js"><link rel="prefetch" href="/assets/js/63.777e9119.js"><link rel="prefetch" href="/assets/js/64.05118592.js"><link rel="prefetch" href="/assets/js/65.9ba14b43.js"><link rel="prefetch" href="/assets/js/66.62408b82.js"><link rel="prefetch" href="/assets/js/67.fa72ffa1.js"><link rel="prefetch" href="/assets/js/68.c16dfb41.js"><link rel="prefetch" href="/assets/js/7.f41c39e4.js"><link rel="prefetch" href="/assets/js/9.f1977faa.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.8fa4990d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.730f6d4f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">既然选择了远方，便只顾风雨兼程 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/2019/10/20/base-list/" class="nav-link">学习资源</a></li><li class="nav-item"><a href="/handbook/" class="nav-link">前端学习手册</a></li><li class="nav-item"><a href="/tag/Reading%20Notes/" class="nav-link">读书笔记</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">既然选择了远方，便只顾风雨兼程 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/2019/10/20/base-list/" class="nav-link">学习资源</a></li><li class="mobile-nav-item"><a href="/handbook/" class="nav-link">前端学习手册</a></li><li class="mobile-nav-item"><a href="/tag/Reading%20Notes/" class="nav-link">读书笔记</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        【step by step】使用 Vue 封装一个表单校验
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">lili</span> <span itemprop="address">   in shenzhen</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2019-12-20T00:00:00.000Z">
      Fri Dec 20 2019
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/JavaScript" data-v-42ccfcd5><span data-v-42ccfcd5>JavaScript</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/Vue" data-v-42ccfcd5><span data-v-42ccfcd5>Vue</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="一、前面的话"><a href="#一、前面的话" class="header-anchor">#</a> 一、前面的话</h2> <p>不管是<code>PC</code>端还是移动端，提交表单是一个常见场景，那么友好交互的表单校验也是一个常见场景了。</p> <p>最近本人在开发移动端页面，也遇见了表单需求，倒霉的是技术选型中的<code>UI</code>库不符合业务场景，于是~~~~</p> <p>我走上了一条自己动手，然后希望丰衣足食的道路.....</p> <p><img src="data:image/jpeg;base64,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" alt="image from dependency"></p> <p>不过当我将思路想清楚之后，我发现实现过程比我想象得简单了很多!现在我来记录一下我的思路。</p> <p><img src="data:image/jpeg;base64,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" alt="image from dependency"></p> <h2 id="二、思路"><a href="#二、思路" class="header-anchor">#</a> 二、思路</h2> <h3 id="交互设计"><a href="#交互设计" class="header-anchor">#</a> 交互设计</h3> <p>由于我们的产品经理没提表单交互要求（果然随便才是最难的），于是我就成了上帝，想怎么折腾就怎么折腾 ^ _ ^</p> <p>于是我就根据经验和业务场景，设计了一下需求：</p> <ol><li>可校验整个表单</li> <li>可校验表单的一部分</li> <li>重置表单并且清除校验结果</li> <li>在表单字段的值变化或者输入结束就校验（通俗点就是输入框值变化或者失焦时触发校验）</li></ol> <h3 id="实现设计"><a href="#实现设计" class="header-anchor">#</a> 实现设计</h3> <p>根据业务场景，在实现表单校验的过程中，我封装了三个组件：<code>Form</code>、<code>FormItem</code>、<code>Input</code>，它的结构应该下面这样的：</p> <p><img src="data:image/png;base64,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" alt="image from dependency"></p> <p>下面是我对他们的功能分配：</p> <h4 id="_1-表单组件-form"><a href="#_1-表单组件-form" class="header-anchor">#</a> 1. 表单组件——<code>Form</code></h4> <p><code>Form</code>组件重点不在<code>UI</code>，它的重点在于逻辑实现，比如实现校验（局部）表单，重置表单等这些功能。</p> <p>之所以将这些功能放在<code>Form</code>组件中，是因为想和<code>UI</code>表单一致，将整个表单包装成一个整体。</p> <p>而如果将这些功能放在<code>FormItem</code>组件中，就是将表单打散了。而且，如果校验整个表单或重置表单时，我们就需要操作一个一个<code>FormItem</code>，这样会让我们的代码很难读。</p> <h4 id="_2-表单项组件-formitem"><a href="#_2-表单项组件-formitem" class="header-anchor">#</a> 2. 表单项组件——<code>FormItem</code></h4> <p>表单项组件重点在<code>UI</code>，主要呈现表单项标签和校验信息</p> <h4 id="_3-输入框"><a href="#_3-输入框" class="header-anchor">#</a> 3. 输入框</h4> <p>其实这里&quot;输入框&quot;指的是能和用户交互的部分，比如<code>select</code>、<code>input</code>、<code>radio</code>、<code>textArea</code>等。根据业务场景，我是对<code>input</code>进行了封装。</p> <h2 id="三、实现"><a href="#三、实现" class="header-anchor">#</a> 三、实现</h2> <p>先把场景摆出来~~~</p> <p><img src="/assets/img/2.75a93e5c.png" alt="image from dependency"></p> <p>上面的场景就包含两个校验需求：</p> <ol><li>点击提交，校验整个表单</li> <li>点击获取短信验证码，需要校验是否输入了正确的手机号，这就是一个校验单个字段的业务场景。</li></ol> <p>现在开始一步一步实现表单校验。</p> <p>现在我的目录结构是这样的：</p> <p><img src="data:image/png;base64,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XtE4H330ka7na9SoISAq1uuYCaQj6CxAsr/85S96ugyGQHQyGGnRoTz77LNx2aZTD6x9J0+erKN20IoPmwM6ApATuwm7du2SvLw8ASYwkjVu3DiuDoV5VKtWLeHXeV4j289+9jPBUgGYQX+cLPzlL38psMZTvkYg67ankmmYb/bPS0VldTejROrm72QUYZyUEYAxEbMUWNnRQUYtZkmQk5zhGj3qN4XlFQmBM2fOaPp69eoVKR/bEpPotrV4juuLgzGQRAeCcly1UKvPNXqo8DLzTCCAr/1gXLxx44YaFXHCz3u8OBNllPQ8SPSS3sIlQD8Y8v75z3/qNuWPf/xjwZd92EKjJI8AiZ48VoxZTAhgqxJ/lPQRINGTwC5XLa1JqMYoliBAY5wlDU017UaARLe7/am9JQiQ6JY0NNW0GwES3e72p/aWIECiW9LQVNNuBEh0u9uf2luCAIluSUNTTbsRINHtbn9qbwkCJLolDU017UaARLe7/am9JQiQ6JY0NNW0GwES3e72p/aWIECiW9LQVNNuBEh0u9uf2luCAIluSUNTTSJABIgAESACRIAIEAEiQASIABEgAkSACBABIkAEiAARIAJEgAgQASJABIgAESACRIAIEAEiQASIABEgAkSACBABIkAEiAARIAJEgAgQASJABIhApAj8D+Ajk86M+JKSAAAAAElFTkSuQmCC" alt="image from dependency"></p> <p>开始时，我是这样写的：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;li-form ref=&quot;form&quot;&gt;
      &lt;li-form-item&gt;
        &lt;li-input&gt;&lt;/li-input&gt;
      &lt;/li-form-item&gt;
      &lt;!-- 省略部分 --&gt;
    &lt;/li-form&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
  name: 'app',
  data() {
    return {
      form: {
        name: '', // 姓名
        phone: '', // 手机号
        email: '',  // 邮箱,
        code: '' // 验证码
      }
    }
  },
  components: {
    [Form.name]: Form,
    [FormItem.name]: FormItem,
    [Input.name]: Input
  }
}
&lt;/script&gt;
</code></pre></div><p>我们使用<code>form</code>来存储用户输入，但是现在的表单只是一个基本的结构，还不具备校验功能。</p> <p>那么，实现表单校验的第一步是啥？？？</p> <p>不知道你想到的第一步是什么，我想到的第一步是实现校验工具</p> <h3 id="step-1-实现校验工具"><a href="#step-1-实现校验工具" class="header-anchor">#</a> <code>step 1</code>：实现校验工具</h3> <p>校验工具是用来实现校验功能的</p> <p>对于实现校验工具，我需要思考两个问题：</p> <ol><li>校验工具的输入和输出</li> <li>定义校验规则</li></ol> <h4 id="_1-校验工具的输入和输出"><a href="#_1-校验工具的输入和输出" class="header-anchor">#</a> 1. 校验工具的输入和输出</h4> <p>校验工具通常是一个函数，那么这个函数就有会输入和输出。</p> <p>校验工具是为了校验用户输入，那么它的输入(参数)就应该是用户的输入和校验规则，由于可以对用户的输入进行多个限制的校验，那么校验规则就应该是一个数组。</p> <p>校验工具的输出应该是校验结果，校验结果可以是下面几种方式：</p> <ol><li><code>Promise.reject() / Promise.resolve()</code>: 用<code>Promise</code>方法来表示校验是否通过。</li> <li><code>Boolean</code>值</li></ol> <p>我选择的是第二种方法。第一种方法的缺点是，在多个表单组合成一个大表单的时候，如果第一个表单校验不通过(<code>Promise.reject()</code>)会阻塞后面表单的校验，不符合业务场景。</p> <h4 id="_2-定义校验规则"><a href="#_2-定义校验规则" class="header-anchor">#</a> 2. 定义校验规则</h4> <p>对于用户的输入，我们应该从什么角度规定用户的输入是合适的，比如是否是必填项，限制长度、最小长度、最大长度、类型（数字或字符串）等。有时我们还需要根据具体需求来动态校验。所以，我从下面几个角度来定义校验规则：</p> <ol><li>是否必填</li> <li>输入长度</li> <li>最小(大)输入长度</li> <li>类型</li> <li>正则校验规则</li> <li>自定义校验</li></ol> <p>假设，我们现在对用户的姓名做这样的限制：必填，输入长度在<code>1 - 10</code>；如果用户没有输入，则提示&quot;请输入姓名&quot;；如果用户输入的字符超出了<code>10</code>个字符，则提示&quot;请输入<code>1 - 10</code>个字符&quot;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 表单：</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 姓名</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 手机号</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">''</span>  <span class="token comment">// 邮箱</span>
<span class="token punctuation">}</span>
<span class="token comment">// 表单规则：</span>
<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入姓名'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入1 - 10个字符'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面的方法是根据用户的输入，然后返回校验信息，注意：这里不是返回校验结果。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// validator.js</span>
<span class="token comment">/*
rules = [
  { required: true, message: '请输入姓名' },
  { min: 1, max: 10, message: '请输入1 - 10个字符'}
]
*/</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">validator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> rules</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 保存校验信息</span>
  rules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">rule</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment">// 字段长度</span>
      max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment">// 最大长度</span>
      min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment">// 最小长度</span>
      message <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>     <span class="token comment">// 校验文案</span>
      pattern <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>     <span class="token comment">// 正则表达式校验</span>
      type <span class="token operator">=</span> <span class="token string">'string'</span><span class="token punctuation">,</span>  <span class="token comment">// 类型</span>
      required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否必填</span>
      validator         <span class="token comment">// 自定义函数</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> rule
    <span class="token keyword">if</span> <span class="token punctuation">(</span>required <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      msg <span class="token operator">=</span> message <span class="token operator">||</span> <span class="token string">'请输入'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// typeValidator: 校验类型</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">typeValidator</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token number">0</span>
      <span class="token comment">// lengthValidator: 校验长度</span>
      msg <span class="token operator">=</span> <span class="token function">lengthValidator</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max<span class="token punctuation">,</span> len<span class="token punctuation">,</span> message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> isReg <span class="token operator">=</span> <span class="token function">typeValidator</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token string">'RegExp'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isReg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        msg <span class="token operator">=</span> <span class="token string">'正则校验规则不正确'</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        msg <span class="token operator">=</span> message <span class="token operator">||</span> <span class="token string">'请输入正确的值'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>validator <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> validator <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      msg <span class="token operator">=</span> <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token comment">// typeValidator: 类型校验函数，比较粗糙~~~</span>
<span class="token keyword">const</span> baseTypes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'boolean'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> typeValidator <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>baseTypes<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> valueType <span class="token operator">=</span> <span class="token keyword">typeof</span> value
    <span class="token keyword">return</span> baseTypes<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>valueType<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'array'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'email'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$</span><span class="token regex-delimiter">/</span></span>
    <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'RegExp'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// lengthValidator: 长度校验函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">lengthValidator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">length<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max<span class="token punctuation">,</span> len<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&amp;&amp;</span> len <span class="token operator">!==</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">||</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请输入</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>len<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个字符</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">&amp;&amp;</span> length <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">||</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">至少输入</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个字符</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&amp;&amp;</span> length <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">||</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">最多输入</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>max<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个字符</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">&amp;&amp;</span> max <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>length <span class="token operator">&lt;</span> min <span class="token operator">||</span> length <span class="token operator">&gt;</span> max<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">||</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请输入</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>max<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个字符</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果用户没有输入时，上面的方式执行后，会返回数组：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">validator</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>name<span class="token punctuation">,</span> rules<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment">// ['请输入姓名', '请输入 1 - 10 个字符']</span>
</code></pre></div><h3 id="step-2-邮递员送信"><a href="#step-2-邮递员送信" class="header-anchor">#</a> <code>Step 2</code>: 邮递员送信</h3> <p>在上一步中，我们调用<code>validator</code> 方法就可以得到校验信息，而前面我们就有说，表单的校验是在<code>Form</code>组件里实现的，所以，我们在<code>Form</code>组件中调用<code>validator</code>就可以了，而调用<code>validator</code>需要拿到<code>form</code>和<code>rules</code>这两个值，我们可以通过<code>prop</code>的形式传递给<code>Form</code>组件。</p> <p>所以，开始，<code>Form</code>组件是这样的：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- form.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { validator } from './validator'
export default {
  name: 'li-form',
  props: {
    data: {
      type: Object,
      default: () =&gt; ({})
    },
    rules: {
      type: Object,
      default: () =&gt; ({})
    }
  },
  methods: {
    // 校验整个表单
    validateFields () {
      // ...
    },
  }
}
&lt;/script&gt;
</code></pre></div><h4 id="_1-校验表单"><a href="#_1-校验表单" class="header-anchor">#</a> 1. 校验表单</h4> <p><code>Form</code>组件里<code>validateFields</code>方法来校验整个表单，在这里我们就要根据校验信息来返回校验结果啦^ _ ^</p> <p>实现校验整个表单需要思考下面两点：</p> <ol><li>校验每个字段，获得每个字段的校验信息，然后根据校验信息，返回校验结果。</li> <li><code>FormItem</code>显示校验信息</li></ol> <p>第一个问题我们已经实现了，只需每个字段调用<code>validator</code>就可以了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// form.vue</span>
<span class="token function">validateFields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hasError <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> ruleKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">)</span>
  ruleKeys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ruleKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>ruleKey<span class="token punctuation">]</span>
    <span class="token keyword">const</span> keyResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateField</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ruleKey<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hasError <span class="token operator">=</span> keyResult<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> hasError
<span class="token punctuation">}</span>
<span class="token function">validateField</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">[</span>prop<span class="token punctuation">]</span>
  <span class="token keyword">let</span> keyResult <span class="token operator">=</span> <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
  <span class="token keyword">return</span> keyResult
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码的逻辑如下图所示：</p> <p><img src="/assets/img/4.ab5c9ffb.png" alt="image from dependency"></p> <p>我们通过遍历每个字段(<code>key</code>)，将表单(<code>form</code>)和校验规则(<code>rules</code>)联系起来，这样就可以获取到每个字段的值(<code>value</code>)和对应的校验规则(<code>rule</code>)，最后调用校验工具函数就可以了</p> <p>第二个问题<code>FormItem</code> 显示校验信息，就好像邮递员送信一样，需要将特定的信送到特定的收信人手上，这里<code>Form</code>组件就是邮递员，所以现在我们就需要将信与收信人联系起来，将检验信息给<code>FormItem</code>，并显示出来</p> <p>那么我们怎么将信与收信人联系起来呢？</p> <p>回忆第一个问题，我们是通过遍历<code>key</code>得到了对应的校验信息，那我们同样可以将<code>key</code>和<code>FormItem</code>绑定起来，用<code>key</code>作为<code>FormItem</code>的唯一标识:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;li-form :data=&quot;form&quot; :rules=&quot;rules&quot; ref=&quot;form&quot;&gt;
      &lt;li-form-item prop=&quot;name&quot;&gt;
        &lt;li-input&gt;&lt;/li-input&gt;
      &lt;/li-form-item&gt;
    &lt;/li-form&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
  name: 'app',
  data() {
    return {
      form: {
        name: '', // 姓名
      },
      rules: {
        name: [
          { required: true, message: '请输入姓名' },
          { min: 1, max: 10, message: '请输入1 - 10个字符'}
        ]
      }
  }
}
&lt;/script&gt;
</code></pre></div><p>如图所示，这样我们就将<code>FormItem</code>和检验信息绑定起来：</p> <p><img src="data:image/png;base64,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" alt="image from dependency"></p> <p>在这里，将<code>key</code>和<code>FormItem</code>绑定起来，具体是使用<code>ref</code>属性。给<code>FormItem</code>添加<code>ref</code>属性后，我们就可以拿到<code>FormItem</code>实例，并且可以操作<code>FormItem</code>的属性和方法。</p> <p>所以，当我们得到校验信息后，就可以通过<code>ref</code>来操作<code>FormItem</code>实例，让它显示校验信息。</p> <p>下面是对<code>FormItem</code>的封装：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- form-item.vue --&gt;
&lt;template&gt;
  &lt;div :ref=&quot;prop&quot;&gt;
    &lt;div&gt;
      &lt;slot name=&quot;label&quot;&gt;
        &lt;span&gt;{{ label }}&lt;/span&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;slot&gt;&lt;/slot&gt;
      &lt;span&gt;{{ msg }}&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'li-form-item',
  props: {
    prop: {
      type: String,
      default: ''
    },
  },
  data () {
    return {
      error: [] // 校验信息:['请输入姓名', '请输入 1 - 10 个字符']
    }
  },
  computed: {
    msg () {
      return this.error[0] // 显示第一个
    }
  }
}
&lt;/script&gt;
</code></pre></div><p><code>FormItem</code>校验信息具体是什么结构，这个就看个人决定了</p> <p>现在我们再回过头来改写<code>validateFields</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// form.vue</span>
<span class="token function">validateFields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> ruleKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">)</span>
  ruleKeys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ruleKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>ruleKey<span class="token punctuation">]</span>
    <span class="token keyword">const</span> keyResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateField</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ruleKey<span class="token punctuation">)</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">validateField</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>vNode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">vnode</span> <span class="token operator">=&gt;</span> prop <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>$refs<span class="token punctuation">)</span>
  <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">[</span>prop<span class="token punctuation">]</span>
  <span class="token keyword">let</span> keyResult <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> rules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    keyResult <span class="token operator">=</span> <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
    vNode<span class="token punctuation">.</span>error <span class="token operator">=</span> keyResult
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> keyResult
<span class="token punctuation">}</span>
</code></pre></div><p>在页面点击提交的时候，我们只写下面的代码就可以实现整个表单的校验啦！</p> <div class="language- extra-class"><pre class="language-text"><code>this.$refs.form.validateFields()
</code></pre></div><p>到这里我们就实现了校验整个表单</p> <p>而且细心的同学可能就会发现其实<code>validateField</code>方法就是校验某个字段的方法。</p> <p><code>validateField</code>方法通过<code>key</code> 来得到<code>FormItem</code>实例，并且得到来校验信息，但是它返回的是校验信息，是一个数组。在这里，我为了和<code>validateFields</code>返回结构保持一致，所以我还另外写了一个方法用来校验某个字段</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// form.vue</span>

<span class="token comment">// 校验表单字段</span>
<span class="token comment">// @params value 表单字段值</span>
<span class="token comment">// @params label 表单字段名称</span>
<span class="token function">validateFieldValue</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> lable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hasError <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> keyResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateField</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> lable<span class="token punctuation">)</span>
  hasError <span class="token operator">=</span> keyResult<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
  <span class="token keyword">return</span> hasError
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>这里 validateFieldValue 只能校验一个字段，它完整的功能应该是可以校验多个字段，但是我没有这个业务场景，所以就没写，后面再完善这里。</p></blockquote> <p>所以在页面里点击获取短信验证码按钮时，写上：</p> <div class="language- extra-class"><pre class="language-text"><code>this.$refs.form.validateFieldValue(this.form.phone, 'phone')
</code></pre></div><p>这就可以校验单个字段了。</p> <h4 id="_2-重置表单"><a href="#_2-重置表单" class="header-anchor">#</a> 2. 重置表单</h4> <p>重置表单实现两个功能：</p> <ol><li>将表单值清空</li> <li>移除校验结果</li></ol> <p>将表单值清空就需要将<code>props</code>传过来的<code>form</code>清空，这就是和父组件通信</p> <p>移除校验结果和校验整个表单类似，只是不需要执行校验工具函数(<code>validator</code>)而已</p> <p>所以，重置表单：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// form.vue</span>
<span class="token comment">// 重置表单</span>
<span class="token function">resetFields</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    obj <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>obj<span class="token punctuation">,</span>
      <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateFields</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 校验整个表单</span>
<span class="token function">validateFields</span> <span class="token punctuation">(</span><span class="token parameter">reset <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> ruleKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">)</span>
  ruleKeys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ruleKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>ruleKey<span class="token punctuation">]</span>
    <span class="token keyword">const</span> keyResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateField</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ruleKey<span class="token punctuation">,</span> reset<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">validateField</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> reset <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">let</span> keyResult <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> rules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reset<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      keyResult <span class="token operator">=</span> <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    vNode<span class="token punctuation">.</span>error <span class="token operator">=</span> keyResult
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> keyResult
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="step-3-寄信"><a href="#step-3-寄信" class="header-anchor">#</a> <code>Step 3</code>: 寄信</h3> <p>表单校验功能基本完成了，但是还有一个校验功能没实现，就是在输入框值变化或者失焦的时候出发校验，所以先让我们来改写一下校验规则：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入姓名'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入1 - 10个字符'</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中<code>trigger</code>就表示校验是在失焦还是值变化时触发校验。</p> <p>那怎么实现呢～～</p> <p>这里有两种思路：</p> <ol><li>在<code>Input</code>组件内部再写一个校验方法</li> <li>触发<code>Form</code>组件的方法</li></ol> <p>第一种思路实现的核心还是<code>key</code>：</p> <ol><li>根据<code>key</code>，首先得到该字段的校验规则</li> <li>在<code>Input</code>组件里调用<code>validator</code>方法得到校验信息</li> <li>操作父组件实例或使用事件，让<code>FormItem</code>显示校验信息</li></ol> <p>思路如下所示</p> <p><img src="/assets/img/6.af79386c.png" alt="image from dependency"></p> <p>但是这个方法也有问题：</p> <ol><li>校验可能会执行多次，比如在最后一个输入框输完后，点击提交，这会出发<code>Form</code>的整体校验和<code>Input</code>的失焦校验。</li> <li><code>Input</code>作为一个输入<code>UI</code>，没必要具备逻辑功能，这使得<code>Input</code>和父组件、<code>FormItem</code>组件的耦合性太高了</li> <li>最后，最重要的一点，作为一个深度懒癌患者，我不想将同样的代码，具备同样的功能的代码写在两个地方写两遍。</li></ol> <p>结果一想，这是让<code>Input</code>和<code>Form</code>通信啊，如果采用事件，那必须得在父组件里监听<code>Input</code>的<code>blur</code>或者<code>change</code>事件，这样灵活性太低了。</p> <p>所以最后，我采用的是第二个方法——触发<code>Form</code>组件的方法</p> <p>实现第二种方法，我们需要解决两个问题：</p> <ol><li>在<code>Input</code>能拿到<code>Form</code>组件的实例</li> <li>因为是调用<code>validateFieldValue (value, lable)</code> 方法，所以我们还需要知道字段<code>key</code></li></ol> <p>这个过程就好像我们把信写好了，需要去邮局去寄信一样。</p> <p>所以现在的问题是我们怎么知道邮局在哪呢？</p> <p><img src="/assets/img/3.831ebb79.gif" alt="image from dependency"></p> <p>在又双叒叕看了<code>Vue</code>的<code>API</code>后，突然灵光一现，发现<code>Provide / inject</code>可以解决我的问题</p> <blockquote><p>这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。</p></blockquote> <p><code>Provide</code>可以向子孙后代注入依赖，那我们将<code>Form</code>实例注入<code>Input</code>就可以啦，另外字段<code>key</code>值我们也可以使用<code>Provide</code> ^ _ ^</p> <p>现在我们先在<code>Form</code>组件里使用<code>Provide</code>来向子孙后代注入实例。</p> <div class="language- extra-class"><pre class="language-text"><code>// form.vue
export default {
  provide () {
    return {
      liForm: this
    }
  }
}
</code></pre></div><p>然后在<code>FormItem</code>组件里使用<code>Provide</code>向子孙注入<code>key</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>// form-item.vue
export default {
  props: {
    prop: {
      type: String,
      default: ''
    }
  }
  provide () {
    return {
      formItem: this.prop
    }
  }
}
</code></pre></div><p>最后我们在<code>Input</code>里使用<code>inject</code>来接收依赖：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- input.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;input
      :value=&quot;value&quot;
      @blur=&quot;$blur&quot;
      @change=&quot;$change&quot;
      @input=&quot;$input&quot;
    &gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'li-input',
  model: {
    prop: 'value',
    event: 'change'
  },
  inject: {
    liForm: {
      default: ''
    },
    formItem: {
      default: ''
    }
  },
  props: {
    value: [String, Number]
  },
  methods: {
    $blur (e) {
      this.$emit('blur', e)
      const value = e.target.value
      this.triggerValidate(value, 'blur')
    },
    $change (e) {
      const value = e.target.value
      this.$emit('change', value)
    },
    $input (e) {
      const value = e.target.value
      this.$emit('input', value)
      this.$emit('change', value)
      this.triggerValidate(value, 'change')
    },
    triggerValidate (value, triggerTime) {
      if (!(this.liForm &amp;&amp; this.formItem)) return
      const trigger = this.liForm.getTriggerTimer(this.formItem, triggerTime)
      if (trigger === triggerTime) {
        this.liForm.validateField(value, this.formItem)
      }
    }
  }
}
&lt;/script&gt;
</code></pre></div><blockquote><p><strong>Note</strong>:在<code>inject</code>里给<code>liForm</code>和<code>formItem</code>添加一个默认值(<code>default</code>)，否则会报错</p></blockquote> <p><code>liForm.getTriggerTimer</code>是为了获取字段校验规则里面定义的校验时机：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// form.vue</span>
<span class="token function">getTriggerTimer</span> <span class="token punctuation">(</span><span class="token parameter">lable<span class="token punctuation">,</span> triggerTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">[</span>lable<span class="token punctuation">]</span>
  <span class="token keyword">const</span> ruleItem <span class="token operator">=</span> rules<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>trigger <span class="token operator">===</span> triggerTime<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> trigger <span class="token operator">=</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token operator">=</span> ruleItem <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> trigger
<span class="token punctuation">}</span>
</code></pre></div><p>到这里，表单校验基本完成啦^ _ ^</p> <p><img src="/assets/img/4.5db2e788.jpg" alt="image from dependency"></p> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>开始是打算附上源码，并写个<code>Demo</code>，可是目前没时间啊，后面会加上。而且这代码写的比较粗糙，也需要完善，不过我写这文章是为了记录我的思路，然后希望让看到这篇文章的你引起思考，让我们能有一个思想上的碰撞。</p> <p>下面来总结一下：</p> <p><img src="/assets/img/7.6e6f9a95.png" alt="image from dependency"></p> <ol><li><code>Form</code>组件实现校验功能，<code>FormItem</code>显示校验信息，<code>Input</code>用于用户输入。</li> <li>通过每个字段的<code>key</code>值将<code>Form</code>、<code>FormItem</code>和<code>Input</code>组件联系在一起。通过<code>key</code>值，<code>Form</code>操作<code>FormItem</code>实例，让<code>FormItem</code>显示校验信息。</li> <li>通过<code>Provide/inject</code>和<code>key</code>值，让<code>Input</code>操作<code>Form</code>组件，实现失焦或值变化校验。</li></ol></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#一、前面的话" title="一、前面的话">一、前面的话</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#二、思路" title="二、思路">二、思路</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#交互设计" title="交互设计">交互设计</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#实现设计" title="实现设计">实现设计</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#三、实现" title="三、实现">三、实现</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-1-实现校验工具" title="step 1 ：实现校验工具">step 1 ：实现校验工具</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-2-邮递员送信" title="Step 2 : 邮递员送信">Step 2 : 邮递员送信</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-3-寄信" title="Step 3 : 寄信">Step 3 : 寄信</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#最后" title="最后">最后</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c4cd884f.js" defer></script><script src="/assets/js/23.d4940eec.js" defer></script><script src="/assets/js/5.5d32c9ea.js" defer></script><script src="/assets/js/8.cd0ad175.js" defer></script>
  </body>
</html>
