(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{474:function(t,s,a){t.exports=a.p+"assets/img/1.f09c244b.png"},475:function(t,s,a){t.exports=a.p+"assets/img/2.ded75b44.png"},476:function(t,s){t.exports="data:image/png;base64,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"},477:function(t,s){t.exports="data:image/png;base64,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"},478:function(t,s,a){t.exports=a.p+"assets/img/5.4fe42a7b.png"},479:function(t,s,a){t.exports=a.p+"assets/img/6.f71348b2.png"},568:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("此文章是基于 Vue 2 版本")])]),t._v(" "),s("p",[t._v("先看个例子：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rootProp")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootCompute")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootWatcher")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("在上面的代码中，我们创建了一个"),s("code",[t._v("Vue")]),t._v("实例，并且我们给了它一个"),s("strong",[t._v("选项对象")]),t._v("来进行初始化。")]),t._v(" "),s("p",[t._v("下面我们将根据"),s("code",[t._v("Vue")]),t._v("源码来说明"),s("code",[t._v("Vue")]),t._v("是如何实现响应式的。")]),t._v(" "),s("h3",{attrs:{id:"vue项目结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue项目结构"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue")]),t._v("项目结构")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("github")]),t._v("上将"),s("code",[t._v("Vue")]),t._v("的源码"),s("code",[t._v("clone")]),t._v("到本地，我们可以看到，"),s("code",[t._v("Vue")]),t._v("的源码目录结构主要如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(474),alt:"image from dependency"}})]),t._v(" "),s("h3",{attrs:{id:"vue入口文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue入口文件"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue")]),t._v("入口文件")]),t._v(" "),s("p",[s("code",[t._v("Vue")]),t._v("在入口文件是"),s("code",[t._v("src/core/index.js")]),t._v("，其中简化的代码如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./instance/index'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Vue\n")])])]),s("p",[t._v("从代码中，我们可以发现，在这个文件中，我们导出了一个"),s("code",[t._v("Vue")]),t._v("实例。那么初始化"),s("code",[t._v("Vue")]),t._v("实例则是在"),s("code",[t._v("src/core/instance/index.js")]),t._v("文件中完成的。")]),t._v(" "),s("h3",{attrs:{id:"vue实例的初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue实例的初始化"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue")]),t._v("实例的初始化")]),t._v(" "),s("p",[s("code",[t._v("Vue")]),t._v("实例的初始化包括一系列的数据初始化,它的目录结构如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(475),alt:"image from dependency"}})]),t._v(" "),s("p",[t._v("来到"),s("code",[t._v("index.js")]),t._v("中")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/instance/index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initMixin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./init'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Vue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initMixin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Vue\n")])])]),s("p",[t._v("从代码中，我们可以看出"),s("code",[t._v("Vue")]),t._v("是一个构造函数，创建"),s("code",[t._v("Vue")]),t._v("实例时，我们会执行"),s("code",[t._v("_init")]),t._v("函数，那么 "),s("code",[t._v("_init")]),t._v("函数到底做了什么？又定义在哪呢？在说"),s("code",[t._v("_init")]),t._v("函数之前，我们先来看看"),s("code",[t._v("initMixin")]),t._v("函数。")]),t._v(" "),s("p",[s("code",[t._v("initMixin")]),t._v("函数是在创建实例之前就执行多的，我们来看看"),s("code",[t._v("initMixin")]),t._v("函数。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/instance/init.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initState "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./state'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initMixin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Class"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_init")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vm")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Component "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initLifecycle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vm 生命周期相关变量初始化操作")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initEvents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vm 事件相关初始化")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initRender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板解析相关初始化")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeCreate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 beforeCreate 钩子函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initInjections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve injections before data/props")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vm 状态初始化")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initProvide")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve provide after data/props")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'created'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 created 钩子函数")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("从这里我们可以看出，"),s("code",[t._v("Vue")]),t._v("构造函数中的"),s("code",[t._v("_init")]),t._v("函数在这里有定义， 所以运行"),s("code",[t._v("new Vue()")]),t._v("时， "),s("code",[t._v("_init")]),t._v("函数就会进行一系列的初始化，包括"),s("code",[t._v("Vue")]),t._v("实例的生命周期，事件、数据等")]),t._v(" "),s("p",[t._v("我们的重点在"),s("code",[t._v("initState(vm)")]),t._v("，里面实现了"),s("code",[t._v("props")]),t._v(", "),s("code",[t._v("methods")]),t._v(","),s("code",[t._v("data")]),t._v(","),s("code",[t._v("computed")]),t._v(","),s("code",[t._v("watch")]),t._v("的初始化操作。我们来看看源码")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/instance/state.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Watcher "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../observer/watcher'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pushTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" popTarget "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../observer/dep'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" observe "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../observer/index'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vm")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_watchers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" opts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("methods"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initMethods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("methods"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* asRootData */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("computed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initComputed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("computed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" nativeWatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initWatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("代码中的"),s("code",[t._v("vm.$options")]),t._v("就是"),s("strong",[t._v("选项对象")]),t._v("，它也是在"),s("code",[t._v("_init")]),t._v("函数中赋值的。")]),t._v(" "),s("p",[t._v("根据代码，我们也可以得到选项对象初始化的顺序：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(476),alt:"image from dependency"}})]),t._v(" "),s("p",[t._v("我们先来说说"),s("code",[t._v("data")]),t._v("的初始化")]),t._v(" "),s("h3",{attrs:{id:"初始化data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化data"}},[t._v("#")]),t._v(" 初始化"),s("code",[t._v("Data")])]),t._v(" "),s("p",[t._v("熟悉"),s("code",[t._v("Vue")]),t._v("的朋友都知道，在"),s("code",[t._v("Vue")]),t._v("组件中，"),s("code",[t._v("data")]),t._v("被要求是一个函数，所以对于"),s("code",[t._v("data")]),t._v("的初始化是执行"),s("code",[t._v("initData(vm)")]),t._v("函数。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/instance/state.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" observe "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../observer/index'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vm")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* asRootData */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("代码中"),s("code",[t._v("observe")]),t._v("是在其他地方定义的，它的参数"),s("code",[t._v("data")]),t._v("是组件中"),s("code",[t._v("data")]),t._v("函数的返回值，比如上面的例子，此时参数"),s("code",[t._v("data")]),t._v("就是对象"),s("code",[t._v("{ a: '', b: '' }")])]),t._v(" "),s("p",[t._v("那我们接着来看"),s("code",[t._v("observe")]),t._v("函数")]),t._v(" "),s("h4",{attrs:{id:"observer-观察者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#observer-观察者"}},[t._v("#")]),t._v(" "),s("code",[t._v("Observer")]),t._v("（观察者）")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/observe/index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("asRootData")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ob")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n  ob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Observer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ob\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("其中，"),s("code",[t._v("observe")]),t._v("实例化了"),s("code",[t._v("Observer")]),t._v("对象，参数为对象"),s("code",[t._v("{ a: '', b: '' }")]),t._v("。")]),t._v(" "),s("p",[t._v("现在我们来看看"),s("code",[t._v("Observer")]),t._v("做了什么")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/observe/index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Dep "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dep'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Observer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vmCount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// number of vms that have this object as root $data")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vmCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遍历对象，通过 defineProperty 函数实现双向绑定")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("obj")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineReactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("类"),s("code",[t._v("Observer")]),t._v("在初始化时保存了传进来的"),s("code",[t._v("data")]),t._v("，并且实例化了一个"),s("code",[t._v("Dep")]),t._v("。")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("data")]),t._v("为对象时，调用了"),s("code",[t._v("walk")]),t._v("函数， 遍历了对象的每个属性，并且调用了"),s("code",[t._v("defineReactive")]),t._v("函数，对每个属性实现双向绑定。")]),t._v(" "),s("p",[t._v("下面我们来看看"),s("code",[t._v("defineReactive")]),t._v("的具体实现")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Define a reactive property on an Object.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineReactive")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("obj")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  customSetter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("Function"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  shallow"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" property "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOwnPropertyDescriptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" getter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" property "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" property"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" setter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" property "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" property"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("getter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" setter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" childOb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("shallow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("enumerable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("configurable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截 getter，当取值时会触发该函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactiveGetter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" val\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拦截 setter，当赋值时会触发该函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactiveSetter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" val\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("setter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n      dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("defineReactive")]),t._v("函数利用了"),s("code",[t._v("Object.defineProperty()")]),t._v("对对象属性进行了重写，并且每个属性都有一个"),s("code",[t._v("Dep")]),t._v("实例")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("Object.defineProperty")]),t._v("中自定义"),s("code",[t._v("get")]),t._v("和"),s("code",[t._v("set")]),t._v("函数，并在"),s("code",[t._v("get")]),t._v("中进行依赖收集，在"),s("code",[t._v("set")]),t._v("中派发更新。")]),t._v(" "),s("p",[t._v("其中，"),s("code",[t._v("dep")]),t._v("是"),s("code",[t._v("Dep")]),t._v("的实例，那"),s("code",[t._v("Dep")]),t._v("到底是什么呢？")]),t._v(" "),s("p",[t._v("—— "),s("code",[t._v("Dep")]),t._v("其实是一个订阅者的管理中心，管理着所有的订阅者")]),t._v(" "),s("p",[t._v("下面我们来看看"),s("code",[t._v("Dep")])]),t._v(" "),s("h3",{attrs:{id:"dep-订阅者管理中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dep-订阅者管理中心"}},[t._v("#")]),t._v(" "),s("code",[t._v("Dep")]),t._v("（订阅者管理中心）")]),t._v(" "),s("p",[t._v("给"),s("code",[t._v("data")]),t._v("属性添加订阅者有一个前提条件 —— "),s("code",[t._v("Dep.target")]),t._v("存在，那"),s("code",[t._v("Dep.target")]),t._v("是什么呢？")]),t._v(" "),s("p",[t._v("我们来看"),s("code",[t._v("src/core/observe/dep.js")]),t._v("中关于"),s("code",[t._v("Dep")]),t._v("的代码：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/observe/dep.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("Watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Watcher"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加观察者")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sub")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除观察者")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeSub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sub")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("depend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 Watcher 的 addDep 函数")]),t._v("\n      Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addDep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 派发更新")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// stabilize the subscriber list first")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" subs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" l "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nDep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" targetStack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushTarget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  targetStack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" target\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("从代码中，我们可以发现:")]),t._v(" "),s("ol",[s("li",[t._v("在"),s("code",[t._v("Dep")]),t._v("中分别定义了"),s("code",[t._v("get")]),t._v("和"),s("code",[t._v("set")]),t._v("中需要用的"),s("code",[t._v("depend")]),t._v("和"),s("code",[t._v("notify")]),t._v("函数，并且可以发现"),s("code",[t._v("depend")]),t._v("是添加一个订阅者，"),s("code",[t._v("notify")]),t._v("是用来更新订阅者的")]),t._v(" "),s("li",[s("code",[t._v("Dep")]),t._v("通过静态属性"),s("code",[t._v("target")]),t._v("来控制在同一时间内只有一个观察者，并且通过"),s("code",[t._v("pushTarget")]),t._v("来给"),s("code",[t._v("target")]),t._v("属性赋值。")]),t._v(" "),s("li",[s("code",[t._v("Dep")]),t._v("中方法主要是对"),s("code",[t._v("Watcher")]),t._v("队列进行增加、移除，所以"),s("code",[t._v("Dep")]),t._v("其实是"),s("code",[t._v("Watcher")]),t._v("管理中心，管理着所有的"),s("code",[t._v("Watcher")]),t._v("。")])]),t._v(" "),s("p",[t._v("下面我们来看看"),s("code",[t._v("Watcher")]),t._v("：")]),t._v(" "),s("h3",{attrs:{id:"watcher-订阅者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#watcher-订阅者"}},[t._v("#")]),t._v(" "),s("code",[t._v("Watcher")]),t._v("（订阅者）")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/observe/watcher.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pushTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" popTarget "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dep'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Watcher")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("uid\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addDep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dep")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Dep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newDepIds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newDepIds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("depIds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSub")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* istanbul ignore else */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lazy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirty "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一般会进入这里")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queueWatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/core/observe/scheduler.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" flushing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queueWatcher")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("watcher")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断 Watcher 是否 push 过")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因为存在改变了多个数据，多个数据的 Watch 是同一个")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("has"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    has"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("flushing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最初会进入这个条件")]),t._v("\n      queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在执行 flushSchedulerQueue 函数时，如果有新的派发更新会进入这里")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入新的 watcher")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最初会进入这个条件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("waiting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      waiting "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("async"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("flushSchedulerQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将所有 Watcher 统一放入 nextTick 调用")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因为每次派发更新都会引发渲染")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flushSchedulerQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("flushSchedulerQueue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentFlushTimestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  flushing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据 id 排序 watch，确保：")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 组件更新从父到子")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 用户写的 Watch 先于渲染 Watch")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 如果在父组件 watch run 的时候有组件销毁了，这个 Watch 可以被跳过")]),t._v("\n  queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不缓存队列长度，因为在遍历的过程中可能队列的长度发生变化")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    watcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("before"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行 beforeUpdate 钩子函数")]),t._v("\n      watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n    has"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在这里执行用户写的 Watch 的回调函数并且渲染组件")]),t._v("\n    watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断无限循环")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 比如在 watch 中又重新给对象赋值了，就会出现这个情况")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" has"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      circular"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("circular"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("circular"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_UPDATE_COUNT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在派发更新的全过程中，核心流程就是给对象赋值，触发"),s("code",[t._v("set")]),t._v("中的派发更新函数。将所有"),s("code",[t._v("Watcher")]),t._v("都放入"),s("code",[t._v("nextTick")]),t._v("中进行更新，"),s("code",[t._v("nextTick")]),t._v("回调中执行用户"),s("code",[t._v("Watch")]),t._v("的回调函数并且渲染组件。")]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Vue")]),t._v("中数据响应原理主要涉及到下面几个类")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(477),alt:"image from dependency"}})]),t._v(" "),s("p",[t._v("下图是类中的一些属性和方法")]),t._v(" "),s("p",[s("img",{attrs:{src:a(478),alt:"image from dependency"}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("下图是几个类的关联")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(479),alt:"image from dependency"}})]),t._v(" "),s("ul",[s("li",[t._v("图中的红色箭头是"),s("code",[t._v("Watcher")]),t._v("的实例化。在实例化的过程中，会调用方法"),s("code",[t._v("get")]),t._v("来设置"),s("code",[t._v("Dep.target")]),t._v("为当前"),s("code",[t._v("Watcher")]),t._v("实例，并且触发观察对象的"),s("code",[t._v("getter")]),t._v("方法，进行依赖收集。")]),t._v(" "),s("li",[t._v("图中的蓝色箭头是依赖收集的过程。观察对象的"),s("code",[t._v("getter")]),t._v("方法被触发，经过"),s("code",[t._v("dep.depend()")]),t._v("、"),s("code",[t._v("Dep.target.addDep()")]),t._v("和"),s("code",[t._v("dep.addSub()")]),t._v("等方法，会将当前观察对象的"),s("code",[t._v("dep")]),t._v("实例添加到"),s("code",[t._v("Watcher")]),t._v(" 实例的"),s("code",[t._v("deps")]),t._v("中，并且将当前"),s("code",[t._v("Watcher")]),t._v("实例添加到"),s("code",[t._v("Dep")]),t._v("的属性"),s("code",[t._v("subs")]),t._v("中进行统一管理。")]),t._v(" "),s("li",[t._v("图中的黄色箭头是派发更新过程。当观察对象改变后，会调用"),s("code",[t._v("dep.notify()")]),t._v("方法，触发"),s("code",[t._v("subs")]),t._v("中当前的"),s("code",[t._v("watcher1")]),t._v("实例的"),s("code",[t._v("update")]),t._v("方法，最后会重新渲染。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);