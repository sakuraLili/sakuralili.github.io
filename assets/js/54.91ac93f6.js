(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{554:function(s,e,t){"use strict";t.r(e);var n=t(5),r=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("最近在学习"),e("code",[s._v("Jenkins")]),s._v("。在学习"),e("a",{attrs:{href:"https://note.youdao.com/",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("Build a Node.js and React app with npm")]),s._v(" "),e("OutboundLink")],1),s._v("部分时，按照官网给的"),e("code",[s._v("simple-node-js-react-npm-app")]),s._v("例子，需要跑一个"),e("code",[s._v("pipeline")]),s._v("，配置文件"),e("code",[s._v("Jenkifile")]),s._v("如下")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pipeline {\n  agent any\n  environment {\n    CI = 'true'\n  }\n  stages {\n    stage('Build') {\n      steps {\n        sh 'npm install'\n      }\n    }\n    stage('Test') {\n      steps {\n        sh './jenkins/scripts/test.sh'\n      }\n    }\n    stage('Deliver') {\n      steps {\n        sh './jenkins/scripts/deliver.sh'\n        input message: 'Finished using the web site? (Click \"Proceed\" to continue)'\n        sh './jenkins/scripts/kill.sh'\n      }\n    }\n  }\n}\n")])])]),e("p",[s._v("但在运行时总报下面的错误：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('java.io.IOException: Cannot run program "nohup" (in directory "C:\\Users\\king\\.jenkins\\workspace\\node-pipeline-demo"): CreateProcess error=2, 系统找不到指定的文件。\n')])])]),e("p",[s._v("有答案说"),e("code",[s._v("sh")]),s._v("是"),e("code",[s._v("Linux")]),s._v("用的，"),e("code",[s._v("window")]),s._v("应该用"),e("code",[s._v("bat")]),s._v("，我将"),e("code",[s._v("sh")]),s._v("改成"),e("code",[s._v("bat")]),s._v("还是没有解决。")]),s._v(" "),e("p",[s._v("最后在"),e("a",{attrs:{href:"https://stackoverflow.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("stackoverflow"),e("OutboundLink")],1),s._v("上面找到了原因和一个比较满意的答案，")]),s._v(" "),e("p",[s._v("原因是在"),e("code",[s._v("Windows")]),s._v("下，使用了如下路径：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v('mklink "C:\\Program Files\\Git\\cmd\\nohup.exe" "C:\\Program Files\\git\\usr\\bin\\nohup.exe"')])]),s._v(" "),e("li",[e("code",[s._v('mklink "C:\\Program Files\\Git\\cmd\\msys-2.0.dll" "C:\\Program Files\\git\\usr\\bin\\msys-2.0.dll"')])]),s._v(" "),e("li",[e("code",[s._v('mklink "C:\\Program Files\\Git\\cmd\\msys-iconv-2.dll" "C:\\Program Files\\git\\usr\\bin\\msys-iconv-2.dll"')])]),s._v(" "),e("li",[e("code",[s._v('mklink "C:\\Program Files\\Git\\cmd\\msys-intl-8.dll" "C:\\Program Files\\git\\usr\\bin\\msys-intl-8.dll"')])])]),s._v(" "),e("p",[s._v("解决步骤如下")]),s._v(" "),e("ul",[e("li",[s._v("下载"),e("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("git-bash")]),e("OutboundLink")],1),s._v("，例如安装目录是"),e("code",[s._v("C:\\Program Files\\Git")])]),s._v(" "),e("li",[s._v("将"),e("code",[s._v("C:\\Program Files\\Git\\bin")]),s._v("注册到环境变量下， 注意注册环境变量后，可能需要重启才能生效，我重启后就没报错了。")]),s._v(" "),e("li",[s._v("在使用"),e("code",[s._v("git-bash")]),s._v("时，使"),e("code",[s._v("nohup")]),s._v("对"),e("code",[s._v("Jenkins")]),s._v("可用。以管理员身份运"),e("code",[s._v("行windows cmd")]),s._v("，然后输入下列命令：")])]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("mklink "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\Git'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v("in"),e("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('ohup.exe"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\git\\usr'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v("in"),e("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('ohup.exe"')]),s._v("\n\nmklink "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\Git'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-2.0.dll"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\git\\usr'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-2.0.dll"')]),s._v("\n\nmklink "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\Git'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-iconv-2.dll"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\git\\usr'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-iconv-2.dll"')]),s._v("\n\nmklink "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\Git'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-intl-8.dll"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Program Files\\git\\usr'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\msys-intl-8.dll"')]),s._v("\n")])])]),e("h3",{attrs:{id:"参考文献"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/45140614/jenkins-pipeline-sh-fail-with-cannot-run-program-nohup-on-windows",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("Jenkins pipeline sh fail with “cannot run program nohup” on windows")]),e("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=r.exports}}]);